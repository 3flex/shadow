(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{313:function(a,t,n){"use strict";n.r(t);var s=n(14),e=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"minimizing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#minimizing"}},[a._v("#")]),a._v(" Minimizing")]),a._v(" "),t("p",[a._v("Shadow can automatically remove all classes of dependencies that are not used by the project, thereby minimizing the resulting shadowed JAR.")]),a._v(" "),t("div",{staticClass:"language-groovy extra-class"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Minimizing a shadow JAR")]),a._v("\nshadowJar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("minimize")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("A dependency can be excluded from the minimization process, thereby forcing it's inclusion the shadow JAR.\nThis is useful when the dependency analyzer cannot find the usage of a class programmatically, for example if the class\nis loaded dynamically via "),t("code",[a._v("Class.forName(String)")]),a._v(". Each of the "),t("code",[a._v("group")]),a._v(", "),t("code",[a._v("name")]),a._v(" and "),t("code",[a._v("version")]),a._v(" fields separated by "),t("code",[a._v(":")]),a._v(" of\na "),t("code",[a._v("dependency")]),a._v(" is interpreted as a regular expression.")]),a._v(" "),t("div",{staticClass:"language-groovy extra-class"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Force a class to be retained during minimization")]),a._v("\nshadowJar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  minimize "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("exclude")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.scala-lang:.*:.*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("Dependencies scoped as "),t("code",[a._v("api")]),a._v(' will automatically excluded from minimization and used as "entry points" on minimization.')])]),a._v(" "),t("p",[a._v("Similar to dependencies, projects can also be excluded.")]),a._v(" "),t("div",{staticClass:"language-groovy extra-class"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[a._v("shadowJar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    minimize "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("exclude")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("project")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token interpolation-string"}},[t("span",{pre:!0,attrs:{class:"token string"}},[a._v('":api"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("When excluding a "),t("code",[a._v("project")]),a._v(", all dependencies of the excluded "),t("code",[a._v("project")]),a._v(" are automatically\nexcluded as well.")])])])}),[],!1,null,null,null);t.default=e.exports}}]);