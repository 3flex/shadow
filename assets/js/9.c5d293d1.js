(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{358:function(a,t,n){"use strict";n.r(t);var s=n(43),e=Object(s.a)({},function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"minimizing"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#minimizing","aria-hidden":"true"}},[a._v("#")]),a._v(" Minimizing")]),a._v(" "),n("p",[a._v("Shadow can automatically remove all classes of dependencies that are not used by the project, thereby minimizing the resulting shadowed JAR.")]),a._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Minimizing an shadow JAR")]),a._v("\nshadowJar "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("minimize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),n("p",[a._v("A dependency can be excluded from the minimization process thereby forcing it's inclusion the shadow JAR.\nThis is useful when the dependency analyzer cannot find the usage of a class programmatically, for example if the class\nis loaded dynamically via "),n("code",[a._v("Class.forName(String)")]),a._v(".")]),a._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Force a class to be retained during minimization")]),a._v("\nshadowJar "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  minimize "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("exclude")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.scala-lang:.*:.*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),n("blockquote",[n("p",[a._v("Dependencies scoped as "),n("code",[a._v("api")]),a._v(' will automatically excluded from minimization and used as "entry points" on minimization.')])]),a._v(" "),n("p",[a._v("Similar to dependencies, projects can also be excluded.")]),a._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[a._v("shadowJar "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    minimize "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("exclude")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("project")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[a._v('":api"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),n("blockquote",[n("p",[a._v("When excluding a "),n("code",[a._v("project")]),a._v(", all dependencies of the excluded "),n("code",[a._v("project")]),a._v(" are automatically\nexcluded as well.")])])])},[],!1,null,null,null);t.default=e.exports}}]);