repositories {
    mavenCentral()
}

apply plugin: 'maven'
apply plugin: 'groovy'
apply plugin: 'idea'

group = 'org.gradle.plugins'
version = "${currentVersion}"

dependencies {
    groovy 'org.codehaus.groovy:groovy-all:1.8.6'
    compile gradleApi()
    
    testCompile "org.spockframework:spock-core:0.6-groovy-1.8"
}

task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

artifacts {
    archives sourcesJar
}


uploadArchives {
    repositories {
        mavenDeployer {
            repository (
                url: bintray_api_base_url + '/maven/' + bintray_username + '/' + bintray_repo + '/' + bintray_package
            ) {
                authentication(
                    userName: bintray_username,
                    password: bintray_api_key
                )
            }
        }
    }
}

boolean isSnapshot() {
    currentVersion.endsWith('SNAPSHOT')
}
