task integTest(type: GradleBuild) {
    buildFile = file('it/build.gradle')
    dir = file('it')
    tasks = ['clean', 'integTest']
}
integTest.dependsOn ':plugin:install'

subprojects {

    repositories {
        mavenCentral()
    }

    apply plugin: 'maven'
    apply plugin: 'groovy'
    apply plugin: 'idea'

    group = 'org.gradle.plugins'
    version = "${currentVersion}"

    jar.dependsOn test
    uploadArchives.dependsOn integTest
}

boolean isSnapshot() {
    currentVersion.endsWith('SNAPSHOT')
}
