apply plugin: 'groovy'
apply plugin: 'idea'

repositories {
    mavenCentral()
}

dependencies {
    compile gradleApi()
    compile 'org.codehaus.plexus:plexus-container-default:1.0-alpha-9-stable-1'
    compile 'org.codehaus.plexus:plexus-utils:3.0.1'
    compile 'asm:asm:3.3.1'
    compile 'asm:asm-commons:3.3.1'
    compile 'org.jdom:jdom:1.1'
    compile 'org.vafer:jdependency:0.7'
    compile 'org.codehaus.plexus:plexus-component-annotations:1.5.5'

    groovy localGroovy()
//    groovy 'org.codehaus.groovy:groovy-all:2.0.5'
//    groovy 'org.apache.ivy:ivy:2.2.0'

    testCompile 'junit:junit:4.10'
    testCompile 'xmlunit:xmlunit:1.3'
}

task createSourceDirs(description : 'Create empty source directories for all defined sourceSets') << {
    project.sourceSets*.allSource.srcDirTrees.flatten().dir.each { dir ->
        if (!dir.exists()) {
            println "Making $dir"
            dir.mkdirs()
        }
    }
}

idea {
    project {
        jdkName = '1.6'
        ipr {
            withXml { provider ->
                provider.node.component.find { it.@name == 'VcsDirectoryMappings' }.mapping.@vcs = 'Git'
            }
        }
    }
    module {
        downloadSources = true
        downloadJavadoc = true
    }
}
